{% extends 'base.html' %}
{% block title %}{{ recipe.title }} | Recipe Manager{% endblock %}

{% block content %}
<article>
    <h2>{{ recipe.title }}</h2>

    {% if recipe.image %}
        <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" style="max-width:100%; height:auto; margin-bottom: 1rem;">
    {% endif %}

    <p><strong>Cook time:</strong> {{ recipe.cook_time }} minutes</p>
    <p><strong>Portions:</strong> {{ recipe.portions }}</p>

    {% if recipe.notes %}
        <p><strong>Notes:</strong> {{ recipe.notes }}</p>
    {% endif %}

    <section>
        <h3>ğŸ§‚ Ingredients</h3>
        <ul>
        {% for ingredient in recipe.ingredients.all %}
            <li>
                {% if ingredient.quantity %}{{ ingredient.quantity }} {% endif %}
                {% if ingredient.unit %}{{ ingredient.unit }} {% endif %}
                {{ ingredient.name }}
                {% if ingredient.category %}<em> ({{ ingredient.category }})</em>{% endif %}
            </li>
        {% empty %}
            <li>No ingredients listed.</li>
        {% endfor %}
        </ul>
    </section>

    <section>
        <h3>ğŸ“‹ Instructions</h3>
        <ol>
        {% for instruction in recipe.instructions.all %}
            <li>{{ instruction.description|safe }}</li>
        {% empty %}
            <li>No instructions provided.</li>
        {% endfor %}
        </ol>
    </section>

    {% if user == recipe.user %}
        <div style="margin-top: 1.5rem;">
            <a href="{% url 'recipe_edit' recipe.recipe_id %}" style="margin-right:1rem;">âœï¸ Edit</a>
            <a href="{% url 'recipe_delete' recipe.recipe_id %}">ğŸ—‘ï¸ Delete</a>
        </div>
    {% endif %}
</article>
{% endblock %}