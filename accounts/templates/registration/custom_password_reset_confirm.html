{% extends "base.html" %}
{% block title %}Set New Password | Recipe Manager{% endblock %}

{% block extra_head %}
<style>
  .form-modern input[type="password"]{
    width:100%; border:1px solid rgb(209 213 219); border-radius:0.75rem;
    padding:0.625rem 0.75rem; background:#fff; color:rgb(30 41 59);
  }
  .dark .form-modern input[type="password"]{
    background:rgb(15 23 42); color:rgb(226 232 240); border-color:rgb(51 65 85);
  }
</style>
{% endblock %}

{% block content %}
<div class="mx-auto max-w-md mt-6">
  <div class="rounded-2xl bg-white dark:bg-slate-800 ring-1 ring-black/5 shadow-card p-5 form-modern">
    {% if validlink %}
      <h1 class="text-2xl font-extrabold">üîë Set a new password</h1>
      <form method="post" class="mt-4 space-y-3">
        {% csrf_token %}
        <label class="block">
          <span class="block text-sm font-semibold mb-1">New password</span>
          <input type="password" name="password" required>
        </label>
        <label class="block">
          <span class="block text-sm font-semibold mb-1">Confirm password</span>
          <input type="password" name="confirm_password" required>
        </label>
        <button type="submit" class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-600 text-white px-4 py-2 font-semibold hover:bg-emerald-700">
          Reset Password
        </button>
      </form>
    {% else %}
      <h1 class="text-2xl font-extrabold">‚ùå Invalid or expired link</h1>
      <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">Your reset link is invalid or has expired. Request a new one below.</p>
      <div class="mt-4">
        <a href="{% url 'accounts:password_reset' %}" class="inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-600 text-white px-4 py-2 font-semibold hover:bg-emerald-700">
          Request new reset link
        </a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
